// This code was generated by Catalin Tomozei using IMS Development Environment (version 1.71 build 3937.27059)
// Copyright (C) 1995-2010 IMS MAXIMS. All rights reserved.

package ims.RefMan.forms.editdate;

import ims.RefMan.vo.CatsReferralReportsVo;
import ims.framework.enumerations.DialogResult;

public class Logic extends BaseLogic
{
	private static final long serialVersionUID = 1L;

	@Override
	protected void onFormOpen(Object[] args) throws ims.framework.exceptions.PresentationLogicException
	{
		CatsReferralReportsVo catsReferral = form.getGlobalContext().RefMan.getCatsReferralReports();
		if (catsReferral != null)
		{
			form.dtim1().setValue(catsReferral.getCATSReportSentDate());
		}
	}
	@Override
	protected void onBtnCancelClick() throws ims.framework.exceptions.PresentationLogicException
	{
		engine.close(DialogResult.CANCEL);
	}
	@Override
	protected void onBtnSaveClick() throws ims.framework.exceptions.PresentationLogicException
	{
		if (form.dtim1().getValue() == null)
		{
			engine.showMessage("CATS Report document sent date is mandatory!");
			return;
		}
		
		CatsReferralReportsVo catsReferral = form.getGlobalContext().RefMan.getCatsReferralReports();
		catsReferral.setCATSReportSentDate(form.dtim1().getValue());
		form.getGlobalContext().RefMan.setCatsReferralReports(catsReferral);
		
		engine.close(DialogResult.OK);
	}
}
